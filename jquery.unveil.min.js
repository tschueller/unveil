/**
 * jQuery Unveil
 * A very lightweight jQuery plugin to lazy load images
 * http://luis-almeida.github.com/unveil
 *
 * Licensed under the MIT license.
 * Copyright 2013 LuÃ­s Almeida
 * https://github.com/luis-almeida
 */

(function(e){e.fn.unveil=function(t,n){function h(){wh=r.height();d()}function p(){var n=u.filter(function(){var n=e(this);if(n.is(":hidden"))return;if(!l)l=t.container.height();var r=c?0:t.container.scrollTop(),i=r+l,s=n.offset().top-(c?t.container.offset().top:0),o=s+n.height();return o>=r-t.threshold&&s<=i+t.threshold});a=n.trigger("unveil");u=u.not(a)}function d(){if(t.throttle){clearTimeout(f);f=setTimeout(function(){p()},t.throttle)}else{p()}}var r=e(window),i={threshold:0,throttle:0,container:r},s=window.devicePixelRatio>1,o=s?"data-src-retina":"data-src",u=this,a,f,l,c=t.container;if(c&&(!c.size||!c.size()))throw"Invalid container";t=e.extend(i,t);this.one("unveil",function(){var e=this.getAttribute(o);e=e||this.getAttribute("data-src");if(e){this.setAttribute("src",e);if(typeof n==="function")n.call(this)}});if(!c)r.resize(d);t.container.scroll(d);p();return this}})(window.jQuery||window.Zepto)